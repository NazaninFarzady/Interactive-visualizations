<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Socioeconomic comparison</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.3.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.3.2.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="b554879d-0f8c-4f99-a7fe-7fb23dbd2d61" data-root-id="p2409" style="display: contents;"></div>
  
    <script type="application/json" id="p2454">
      {"d27618dc-3624-4879-99fc-0a306a37591e":{"version":"3.3.2","title":"Bokeh Application","roots":[{"type":"object","name":"Column","id":"p2409","attributes":{"children":[{"type":"object","name":"Div","id":"p2391","attributes":{"styles":{"type":"map","entries":[["border","1px solid #808080"],["border-radius","5px"],["width","768px"],["padding","10px"],["font-family","Arial, sans-serif"],["font-size","12px"],["color","black"]]},"text":"\n    &lt;p&gt;&lt;span style=\"color: red\"&gt;&lt;strong&gt;Demo content: This dashboard is part of an academic paper (under peer review) and the full code will be shared after publication!&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;/p&gt;\n"}},{"type":"object","name":"Row","id":"p2408","attributes":{"children":[{"type":"object","name":"Figure","id":"p2329","attributes":{"width":800,"x_range":{"type":"object","name":"Range1d","id":"p2362","attributes":{"start":0.576,"end":3.7010000000000005,"bounds":[-0.9,null]}},"y_range":{"type":"object","name":"Range1d","id":"p2363","attributes":{"start":181897.04732999997,"end":1126189.696,"bounds":[-0.9,null]}},"x_scale":{"type":"object","name":"LinearScale","id":"p2339"},"y_scale":{"type":"object","name":"LinearScale","id":"p2340"},"title":{"type":"object","name":"Title","id":"p2332","attributes":{"text":"Socioeconomic comparison"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p2373","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p2367","attributes":{"selected":{"type":"object","name":"Selection","id":"p2368","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2369"},"data":{"type":"map"}}},"view":{"type":"object","name":"CDSView","id":"p2374","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2375"}}},"glyph":{"type":"object","name":"Circle","id":"p2370","attributes":{"size":{"type":"value","value":0},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0},"line_width":{"type":"value","value":0},"fill_color":{"type":"value","value":"#1f77b4"},"fill_alpha":{"type":"value","value":0}}},"nonselection_glyph":{"type":"object","name":"Circle","id":"p2371","attributes":{"size":{"type":"value","value":0},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"line_width":{"type":"value","value":0},"fill_color":{"type":"value","value":"#1f77b4"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Circle","id":"p2372","attributes":{"size":{"type":"value","value":0},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.2},"line_width":{"type":"value","value":0},"fill_color":{"type":"value","value":"#1f77b4"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}},{"type":"object","name":"GlyphRenderer","id":"p2384","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p2322","attributes":{"selected":{"type":"object","name":"Selection","id":"p2323","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2324"},"data":{"type":"map","entries":[["x",{"type":"ndarray","array":{"type":"bytes","data":"hetRuB6F+z9I4XoUrkcDQEjhehSuRwdA"},"shape":[3],"dtype":"float64","order":"little"}],["y",{"type":"ndarray","array":{"type":"bytes","data":"hslUQW64D0F6xyl6bKcZQdbFbbQGiCFB"},"shape":[3],"dtype":"float64","order":"little"}],["segment_name",{"type":"ndarray","array":["Group 1","Group 2","Group 3"],"shape":[3],"dtype":"object","order":"little"}],["segment_pop",{"type":"ndarray","array":{"type":"bytes","data":"xmQJAFK/EgCj8gIA"},"shape":[3],"dtype":"int32","order":"little"}],["x_max_visible",[2.91,2.91,2.91]],["x_min_visible",[1.72,1.72,1.72]],["y_max_visible",[574467.3524,574467.3524,574467.3524]],["y_min_visible",[259853.7819,259853.7819,259853.7819]],["y_max_column",[0,0,0]],["size_type_label",["Segment population by household","Segment population by household","Segment population by household"]],["segment_pop_size",{"type":"ndarray","array":{"type":"bytes","data":"1edqK/bHT0DlYaHWNDdfQDY8vVKWUTVA"},"shape":[3],"dtype":"float64","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p2385","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2386"}}},"glyph":{"type":"object","name":"Circle","id":"p2381","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"field","field":"segment_pop_size"},"line_color":{"type":"field","field":"segment_name","transform":{"type":"object","name":"CategoricalColorMapper","id":"p2328","attributes":{"palette":["red","gray","#00a693"],"factors":["Group 1","Group 2","Group 3"]}}},"line_alpha":{"type":"value","value":0.95},"line_width":{"type":"value","value":1.1},"fill_color":{"type":"field","field":"segment_name","transform":{"id":"p2328"}},"fill_alpha":{"type":"value","value":0.15},"hatch_color":{"type":"field","field":"segment_name","transform":{"id":"p2328"}}}},"nonselection_glyph":{"type":"object","name":"Circle","id":"p2382","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"field","field":"segment_pop_size"},"line_color":{"type":"field","field":"segment_name","transform":{"id":"p2328"}},"line_alpha":{"type":"value","value":0.1},"line_width":{"type":"value","value":1.1},"fill_color":{"type":"field","field":"segment_name","transform":{"id":"p2328"}},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"field","field":"segment_name","transform":{"id":"p2328"}},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Circle","id":"p2383","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"field","field":"segment_pop_size"},"line_color":{"type":"field","field":"segment_name","transform":{"id":"p2328"}},"line_alpha":{"type":"value","value":0.2},"line_width":{"type":"value","value":1.1},"fill_color":{"type":"field","field":"segment_name","transform":{"id":"p2328"}},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"field","field":"segment_name","transform":{"id":"p2328"}},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2338","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p2351"},{"type":"object","name":"WheelZoomTool","id":"p2352","attributes":{"renderers":"auto"}},{"type":"object","name":"BoxZoomTool","id":"p2353","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p2354","attributes":{"syncable":false,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"SaveTool","id":"p2359"},{"type":"object","name":"ResetTool","id":"p2360"},{"type":"object","name":"HelpTool","id":"p2361"},{"type":"object","name":"HoverTool","id":"p2364","attributes":{"renderers":"auto","tooltips":[["Segment","@segment_name"],["Segment population","@segment_pop{0,0} Households"],["Household size (persons)","@x{0,0.0}"],["Income after tax (Currency)","@y{0,0.0}"]]}}]}},"left":[{"type":"object","name":"LinearAxis","id":"p2346","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2347","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"NumeralTickFormatter","id":"p2389","attributes":{"format":"0,0.0"}},"axis_label":"Income after tax (Currency)","major_label_orientation":"vertical","major_label_policy":{"type":"object","name":"AllLabels","id":"p2349"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p2341","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2342","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"NumeralTickFormatter","id":"p2388","attributes":{"format":"0,0.0"}},"axis_label":"Household size (persons)","major_label_policy":{"type":"object","name":"AllLabels","id":"p2344"}}}],"center":[{"type":"object","name":"Grid","id":"p2345","attributes":{"axis":{"id":"p2341"}}},{"type":"object","name":"Grid","id":"p2350","attributes":{"dimension":1,"axis":{"id":"p2346"}}},{"type":"object","name":"Label","id":"p2366","attributes":{"level":"image","text":"2005","text_color":"lightgray","text_font_size":"240px","text_font_style":"bold","x":100,"x_units":"screen","y":180,"y_units":"screen"}},{"type":"object","name":"Legend","id":"p2376","attributes":{"location":"top_center","orientation":"horizontal","items":[{"type":"object","name":"LegendItem","id":"p2377","attributes":{"label":{"type":"value","value":"Unit: Households"},"renderers":[{"id":"p2373"}]}},{"type":"object","name":"LegendItem","id":"p2387","attributes":{"label":{"type":"field","field":"segment_name"},"renderers":[{"id":"p2384"}]}}]}}],"background_fill_color":"white"}},{"type":"object","name":"Column","id":"p2407","attributes":{"children":[{"type":"object","name":"Slider","id":"p2318","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p2398","attributes":{"args":{"type":"map","entries":[["render_source",{"id":"p2322"}],["source",{"type":"object","name":"ColumnDataSource","id":"p2325","attributes":{"selected":{"type":"object","name":"Selection","id":"p2326","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2327"},"data":{"type":"map","entries":[["index",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAAAARAAAAEgAAABMAAAAUAAAAFQAAABYAAAAXAAAAGAAAABkAAAAaAAAAGwAAABwAAAAdAAAAHgAAAB8AAAAgAAAAIQAAACIAAAAjAAAAJAAAACUAAAAmAAAAJwAAACgAAAApAAAAKgAAACsAAAAsAAAALQAAAC4AAAAvAAAAMAAAADEAAAAyAAAAMwAAADQAAAA1AAAA"},"shape":[54],"dtype":"int32","order":"little"}],["YearColumn",{"type":"ndarray","array":{"type":"bytes","data":"1QcAANYHAADXBwAA2AcAANkHAADaBwAA2wcAANwHAADdBwAA3gcAAN8HAADgBwAA4QcAAOIHAADjBwAA5AcAAOUHAADmBwAA1QcAANYHAADXBwAA2AcAANkHAADaBwAA2wcAANwHAADdBwAA3gcAAN8HAADgBwAA4QcAAOIHAADjBwAA5AcAAOUHAADmBwAA1QcAANYHAADXBwAA2AcAANkHAADaBwAA2wcAANwHAADdBwAA3gcAAN8HAADgBwAA4QcAAOIHAADjBwAA5AcAAOUHAADmBwAA"},"shape":[54],"dtype":"int32","order":"little"}],["PopulationByPerson",{"type":"ndarray","array":{"type":"bytes","data":"RU5GAMXSRgDKckcAe01IAGY/SQBfJUoA/BdLAK8ZTADdGE0ALftNAI3RTgACjk8AFj5QAAPOUABRTVEAF+dRAA1EUgB3plIARU5GAMXSRgDKckcAe01IAGY/SQBfJUoA/BdLAK8ZTADdGE0ALftNAI3RTgACjk8AFj5QAAPOUABRTVEAF+dRAA1EUgB3plIARU5GAMXSRgDKckcAe01IAGY/SQBfJUoA/BdLAK8ZTADdGE0ALftNAI3RTgACjk8AFj5QAAPOUABRTVEAF+dRAA1EUgB3plIA"},"shape":[54],"dtype":"int32","order":"little"}],["PopulationByHousehold",{"type":"ndarray","array":{"type":"bytes","data":"1BgfAMCCHwBR+h8ARJsgAAQzIQBEoSEAPh8iALK2IgDnUCMA19cjAFZMJACytiQArh0lAN2IJQDo6SUA7m8mAMDsJgBeNycA1BgfAMCCHwBR+h8ARJsgAAQzIQBEoSEAPh8iALK2IgDnUCMA19cjAFZMJACytiQArh0lAN2IJQDo6SUA7m8mAMDsJgBeNycA1BgfAMCCHwBR+h8ARJsgAAQzIQBEoSEAPh8iALK2IgDnUCMA19cjAFZMJACytiQArh0lAN2IJQDo6SUA7m8mAMDsJgBeNycA"},"shape":[54],"dtype":"int32","order":"little"}],["Segment",{"type":"ndarray","array":["Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 1","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 2","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3","Group 3"],"shape":[54],"dtype":"object","order":"little"}],["SegmentPopulationByPerson",{"type":"ndarray","array":{"type":"bytes","data":"3UsQAB7SDwDQlQ8AHoYPAMqODwA7jQ8A96APAJXHDwDY/Q8Ah6EQABzdEAAOFhEAuk8RACejEQCGABIAEpQSAPsfEwB8vRMAGlEtACrvLQB1ZS4ALuYuABlqLwAe6S8AgFwwAC3LMABELTEAMhYxAMpcMQDuhzEA160xAEeuMQDllTEAWG4xAAciMQCc0DAAY50IAOb9CADiYwkAP80JAMAyCgAVnAoAJAgLAP9zCwB/2wsAZjEMAOeNDAA15gwAAzYNABZ3DQBQsg0AvuINAAYCDgBgGA4A"},"shape":[54],"dtype":"int32","order":"little"}],["SegmentPopulationByHousehold",{"type":"ndarray","array":{"type":"bytes","data":"xmQJADItCQCWFAkAhxsJADQqCQCIJAkAniwJAKNJCQAkbgkA8JMJAEGtCQDHxAkAF+EJALQOCgBYQAoAEZkKAGfzCgDROQsAUr8SAK48EwDNpRMA2BYUAAJ8FABNzhQA3yAVAKN1FQCbxhUAXvgVAJkzFgDfZRYAjpIWAAG0FgBXyBYAM90WAEHpFgDF3RYAo/ICAPUWAwAJPgMAy2YDAK2KAwBBrAMAic8DADv1AwDiGQQAQEkEAA5pBAB2iQQAgKcEANTDBABa3wQAyfgEABwQBQC9HwUA"},"shape":[54],"dtype":"int32","order":"little"}],["HouseholdAverageSize",{"type":"ndarray","array":{"type":"bytes","data":"hetRuB6F+z+F61G4HoX7P1yPwvUoXPs/CtejcD0K+z/hehSuR+H6PwrXo3A9Cvs/CtejcD0K+z8K16NwPQr7P+F6FK5H4fo/hetRuB6F+z+uR+F6FK77P65H4XoUrvs/16NwPQrX+z/Xo3A9Ctf7P9ejcD0K1/s/16NwPQrX+z+uR+F6FK77P9ejcD0K1/s/SOF6FK5HA0AK16NwPQoDQM3MzMzMzAJApHA9CtejAkB7FK5H4XoCQGZmZmZmZgJAPQrXo3A9AkApXI/C9SgCQAAAAAAAAAJA16NwPQrXAUDD9Shcj8IBQK5H4XoUrgFAhetRuB6FAUBxPQrXo3ABQFyPwvUoXAFASOF6FK5HAUAfhetRuB4BQArXo3A9CgFASOF6FK5HB0AzMzMzMzMHQB+F61G4HgdA9ihcj8L1BkD2KFyPwvUGQArXo3A9CgdAH4XrUbgeB0AfhetRuB4HQArXo3A9CgdAuB6F61G4BkC4HoXrUbgGQLgehetRuAZApHA9CtejBkCPwvUoXI8GQHsUrkfhegZAUrgehetRBkAUrkfhehQGQAAAAAAAAAZA"},"shape":[54],"dtype":"float64","order":"little"}],["HouseholdAverageAge",{"type":"ndarray","array":{"type":"bytes","data":"y3K9iv5uTEB+CLQuSEFMQCbZE850B0xAe1uj84KcS0BOKccFXSpLQMUGByj30EpA5id8mRlpSkDRetNcJf1JQPLscmbrgklAC84CvifjSEDfjzvg1YJIQEyIfTjILkhAoBpSKXPeR0AhZZ/qQn5HQPBgRvayKkdAdBjIeZXKRkCRb7+gvW9GQDZaNtwkMkZAxcBbbtVXRUBSJUfRxqNFQIftTHet4EVA4xDYM+8WRkDCMKKp+khGQOJ3sWYqfEZAJtylVR2sRkBR7wg1DttGQH6jQKvzBkdAZHM3sBdIR0BwuelyOHVHQAyEnmAVqkdAl0w49t3cR0D9cE/PQBRIQGUZYdHqUEhA9/WO+uCNSEDnsbFpbtBIQFcapodpF0lAe90xMEV/PkBXr5e4Eec+QEb518fLRz9A9flHFZSrP0B6yK7JMwlAQJYsB/7NPUBArXdnbjJzQECPZOwboKtAQLXNokH350BAFN80UBM5QUC9O+gbNIFBQN6ghra3zEFACr3ftsMcQkAXZ5cYF3ZCQI9bcwm400JAp0tH4Mc1Q0BAtqam4qBDQGTEP0WREERA"},"shape":[54],"dtype":"float64","order":"little"}],["IncomeAfterTax",{"type":"ndarray","array":{"type":"bytes","data":"hslUQW64D0EKaCKs3mwQQYEExQ/RyhFBzczMDLQIE0G8BRKUsy4TQbU3+EKZxxNBnzwsFDC4FEFzaJFtvncVQe/Jw8KJJBZBf/s6sNkvF0FbQj4onb0XQY4G8FYCIhhBPzVeejfjGEF+HTjnmbkZQZF++3pi7RpBSFD8GOlLG0GJQWAlmtMcQQAAAAAAAPh/escpemynGUHGbTRAkZ0ZQcZtNACSvhtBj1N05IFyHUHb+X7qyGwdQW+BBIUYQh5B/mX35JqTH0FeukmMu2EgQQ6+MLlV7SBBFNBEWBxuIUGTGAS20NIhQRsv3WQJ6SFBdk8eFtxOIkEEVg4tMM4iQaabxGDodSNByjLEsTm0I0HSAN7iD78kQQAAAAAAAPh/1sVttAaIIUFcj8L1QdogQecdp2g9gyJBbVZ9joO9I0FE+u1L6sUjQTeJQeCuhSRB/Yf0uzaYJUG1pnmnyJ0mQdZW7G8XkydBbjSAV+5HKEH2l92zmXEpQfrt6wAMYylB+n5qvNgjKkEu/yG9NwkrQezAOaPzDSxBLNSa5mqqLEGF61G4gD4vQQAAAAAAAPh/"},"shape":[54],"dtype":"float64","order":"little"}],["Wealth",{"type":"ndarray","array":{"type":"bytes","data":"cayL2xboHEGZKhjVloYgQSV1Anpg2iFBQBNhozOSIkG5/IfUDoQjQfKwUGtf5CZBS8gHfV3aJ0Fv8IUp9UgpQdnO9xOMiypB3gIJCpP6K0Hn+6nxGvgtQSGwcig9MjBBMzMzM8jmMEHLoUV2eAIxQaAaL/2j7TFBuB6FqyW7MkEAAAAAAAD4fwAAAAAAAPh/m1Wfq3RCJ0HUmua9kOcqQfYoXI/lXy1B0SLbOUXVLkFU46UbYoAwQV66SYxqDTNBI9v5HkfcM0G0yHYeADc1QSuHFvmfkjZB+n5qHIffN0EZBFYufbg5Qd0kBuFotjtBXrpJDGbdPEEUrkeB8OI8QYcW2Y5Spz5B+FPjJZrWP0EAAAAAAAD4fwAAAAAAAPh/F0hQHJstLkH+1HipjbAxQSPb+R76dzNBpHA9alcWNUGDwMoBEg03QcuhRVaP4DtBrBxaRExaPUG28/0Uj28/QaAaL/0U9UBBQmDlIC8CQkGR7XyfdQJEQWIQWNkqCkZBPzVeuuxNR0EIrBxqj2lHQRkEVr4pWElBtMh23hyTSkEAAAAAAAD4fwAAAAAAAPh/"},"shape":[54],"dtype":"float64","order":"little"}],["Debt",{"type":"ndarray","array":{"type":"bytes","data":"gZVDSy/4FEGmm8QgN3kXQejZrLq58hlB9+RhIVp5G0EZc9dS4MocQWPuWgLigh5Bklz+Azg4IEEsZRlCkEchQcPTKwUKRyJB4C2QwLDfI0FLyAe9NzAlQZeQD1pQtyZBkX77mhkyKEH7OnBO1ropQfKwUAs/aCtBowG8JU/iLEFxPQoXj8wuQQAAAAAAAPh/pHA9qmiNJkHGbTSg3MMoQTqSy79XAStB/Yf0uw9TLEEgY+46BnAtQU5iENhdyS5BWDm06EssMEH4U+PFSwAxQfp+anyzxjFBeekm8dBbMkF56SZxcREzQZzEIDBAyzNBsHJo0VhONEGWQ4sMl9s0QRSuRyGtbTVBd76fOvvINUFxPQqXmCA2QQAAAAAAAPh/CKwcOtB3M0FaZDs/kaU1QQAAAODztjdBXI/CNVgJOUEQWDl0QEA6Qef7qbHWzjtB30+NFzyjPUGF61FY83g/QQwCK2dwqUBB16NwzaUsQUFMN4lhPgNCQQIrhzad4UJBvHSTOPmNQ0HufD9liTdEQaJFtpNB5kRBK4cWOadfRUG+nxqf/9RFQQAAAAAAAPh/"},"shape":[54],"dtype":"float64","order":"little"}],["HouseholdWithChildren_Percent",{"type":"ndarray","array":{"type":"bytes","data":"xCrWV/RRNED32RIDbiY0QHQn2H+d9TNAwKlZsQmlM0DnV+9HvHczQEbavi5gjDNAUuB0/UidM0DLBE9jc4YzQH5MEBpmajNA+zkmB8OqMkDFZrJF890yQBJCUercBTNAzVjygMsdM0B9dVWgFiIzQKqdH055JjNA6NbOpAv6MkCwgJWFp9kyQA/0ioYQEjNAkZG7IXDaRUD7D34crFlFQPGPCNft4kRAlLbhRZlmREAWihEVbBhEQGZtESBc5ENABcoBFtSyQ0CWYFAqinVDQC7o99wNNkNAhXPThyohQkDUiojFnPJBQPZ7Yp0qtkFAMRoBLquBQUBR0BalPktBQNe0/7+5CUFAjKbMMGLBQEC+rYk/aXtAQOPGiJ/aOUBA2b9fivo2TkAkFkqJUf5NQBvsdov6tU1AgiqgFqRrTUDm1ntc4WtNQDzXOf7ygk1ADHh4UzqVTUBBE92Kr4tNQErOLoTBfU1ATdKAatEuTECiN0fj8TxMQL9ZcxXFMExAvNAai78fTEC82t1FEPJLQMimCZkzuUtA7tt7frl3S0BSR0OdJBhLQGsN5xJ1yUpA"},"shape":[54],"dtype":"float64","order":"little"}],["all_Percent",{"type":"ndarray","array":{"type":"bytes","data":"MzMzMzPzVEBI4XoUrrdUQClcj8L1aFRAMzMzMzPjU0D2KFyPwlVTQArXo3A96lJAPQrXo3BtUkAfhetRuN5RQNejcD0KV1FAZmZmZmZ2UUDsUbgehRtRQHsUrkfh2lBA7FG4HoWrUEBxPQrXo4BQQM3MzMzMTFBAUrgehesBUEAK16NwPcpPQOF6FK5HYU9A7FG4HoWLVUAAAAAAAHBVQK5H4XoUTlVAXI/C9SgcVUApXI/C9ehUQJqZmZmZuVRASOF6FK6HVEBSuB6F61FUQHE9CtejIFRArkfhehQOVEDXo3A9CudTQBSuR+F6xFNAcT0K16OgU0DXo3A9CodTQIXrUbgedVNA4XoUrkdhU0DD9Shcj1JTQEjhehSuR1NAPQrXo3CdVEAAAAAAAIBUQI/C9ShcX1RApHA9CtczVEBSuB6F6wFUQKRwPQrX01NAhetRuB6lU0AUrkfhenRTQOxRuB6FS1NAuB6F61EoU0DXo3A9CgdTQNejcD0K51JAmpmZmZnJUkBxPQrXo7BSQClcj8L1mFJAhetRuB6FUkAK16NwPXpSQMP1KFyPclJA"},"shape":[54],"dtype":"float64","order":"little"}],["Immigrant_Percent",{"type":"ndarray","array":{"type":"bytes","data":"66FkD0AzMED1CtFCfiExQNvdRZAxXTJA6mNXvXByNEBLkZ0zeao2QDKZhdEHVzhA/PBee4dKOkA5PRhGtIU8QISMV4sVoz5AFEsdJhInPkAIBq0T2ZE/QE8iobEfSkBAwwMUNHeoQEAPZk0L4v5AQK6UrxV+ZkFAnD7QRLf8QUAHNWwpWjVCQENRh7LDnkJAljgbwJWhK0ByqYQG5n0sQJaTsyT+ji1AjhhmNgIeL0B/vUa7n1swQLQZK1pOGTFApapDTXjiMUBUqbj1w7cyQDqnYREmfDNAonUairfGM0CRWYMYZGM0QEUF2l9u7jRAvNZzDKd8NUDoRfXvXeM1QA4xXvOqLDZA9BNSp9F7NkDkOIXPtbU2QLTX7Xkf4DZAxu5Msh+KMUArFuA3lQEyQPTfg9cuhDJABmV9d+kxM0C5z56JuPgzQE7KatusrzRA92X+C+NsNUBIbJgduS42QDNJE4zWzzZARP54M5NdN0CN0844JuI3QE6PVHzPYjhAUYs9ixDaOEC2HAE/Vz05QAOFMG3umzlAILP1BHDsOUBmk3DfchY6QJQmjAM7NDpA"},"shape":[54],"dtype":"float64","order":"little"}],["UniversityEducation_Percent",{"type":"ndarray","array":{"type":"bytes","data":"KVyPwvUoNkDXo3A9Ctc2QNejcD0KlzdAj8L1KFxPOEB7FK5H4To5QGZmZmZmJjpAj8L1KFxPO0CamZmZmZk8QK5H4XoU7j1Aj8L1KFyPQEAzMzMzMzNBQOF6FK5H4UFAzczMzMxsQkB7FK5H4RpDQDMzMzMz00NAuB6F61F4REApXI/C9QhFQAAAAAAAAPh/7FG4HoWrQUB7FK5H4dpBQB+F61G4/kFAAAAAAAAgQkCPwvUoXE9CQI/C9Shcj0JA9ihcj8LVQkCamZmZmRlDQD0K16NwXUNA9ihcj8K1Q0D2KFyPwvVDQFK4HoXrMURAhetRuB5lREC4HoXrUZhEQOxRuB6Fy0RA9ihcj8L1REA9CtejcB1FQAAAAAAAAPh/SOF6FK6nTEDD9ShcjwJNQHsUrkfhOk1APQrXo3B9TUAK16NwPcpNQNejcD0KN05APQrXo3CdTkDD9ShcjwJPQDMzMzMzc09AAAAAAADgT0DXo3A9ChdQQD0K16NwPVBAzczMzMxcUEBmZmZmZnZQQAAAAAAAkFBAcT0K16OgUEDNzMzMzKxQQAAAAAAAAPh/"},"shape":[54],"dtype":"float64","order":"little"}],["Urban_Percent",{"type":"ndarray","array":{"type":"bytes","data":"uB6F61FoVEDsUbgehZtUQArXo3A9ylRAmpmZmZn5VEA9CtejcB1VQIXrUbgeJVVAzczMzMwsVUAK16NwPTpVQArXo3A9SlVAcT0K16NgVUD2KFyPwnVVQMP1KFyPolVAZmZmZmbGVUAK16NwPepVQD0K16NwDVZAKVyPwvUoVkAAAAAAAAD4fwAAAAAAAPh/H4XrUbgeU0ApXI/C9ThTQJqZmZmZSVNAMzMzMzNjU0C4HoXrUWhTQD0K16NwbVNAMzMzMzNzU0AUrkfhenRTQFyPwvUonFNAj8L1KFyfU0AUrkfheqRTQI/C9Shcr1NAPQrXo3C9U0AUrkfhesRTQHsUrkfhylNApHA9CtfTU0AAAAAAAAD4fwAAAAAAAPh/KVyPwvV4VUBcj8L1KJxVQFK4HoXroVVAmpmZmZm5VUAAAAAAALBVQAAAAAAAsFVAAAAAAACwVUBI4XoUrqdVQClcj8L16FVAPQrXo3DdVUCPwvUoXN9VQGZmZmZm5lVAXI/C9SjsVUBxPQrXo/BVQHE9Ctej8FVAKVyPwvX4VUAAAAAAAAD4fwAAAAAAAPh/"},"shape":[54],"dtype":"float64","order":"little"}],["HousingOwnership_Percent",{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAA4j8AAAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H+kcD0K1wNMQLgehetR2EtA9ihcj8J1S0CkcD0K12NLQGZmZmZmRktAcT0K16PQSkBcj8L1KLxKQFyPwvUoPEtAAAAAAAA4j8AAAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H/Xo3A9CjdUQB+F61G4LlRAcT0K16MgVEAzMzMzMyNUQNejcD0KN1RAH4XrUbguVEDhehSuR0FUQIXrUbgeVVRAAAAAAAA4j8AAAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H8AAAAAAAD4fwAAAAAAAPh/AAAAAAAA+H9cj8L1KAxWQB+F61G4PlZAUrgehethVkCamZmZmYlWQOF6FK5HsVZA16NwPQrHVkBxPQrXo/BWQJqZmZmZCVdA"},"shape":[54],"dtype":"float64","order":"little"}],["Different_ResidenceWork_Percent",{"type":"ndarray","array":{"type":"bytes","data":"OMgP9dgYLEAmX32Sb0QtQJ4//UOtLi9AllDQjvdGL0AniKT1kH0uQODi7D/a4C5ABfWz3AnuL0CZvqMxnW4wQGeen0DjvjBAGgMkaZa4MkDK9bAHifMxQLWz0wXCVzJAvzo/C70DM0CtVcaYqd8zQOXmuj2cgTRA+dqroa/sM0A50cfipqM1QM6kSG57/jZAstkrBk/ZQEDhlAwMrxBBQJ1qlG9fa0FAifoi4xsqQUC1oBeZkJxAQAJmUtJtfUBAr3VDtFOSQECxEahZYppAQNnzXReyckBAneJIAuNXQEB0UOTm5Go/QPoKr8uLHz9AQNLI2DQWP0Dal2pVITQ/QKHJYLUcQj9AlHyUqYE3PUDRqZC5n8s9QHj0mvIS8j1AnGVTMYdzR0BZbhgmkttHQOib0HSoOkhAWzJF4Ak4SEB7d9ImgO9HQGbPAQ19GkhAfDRHIbB7SEAJfveWIMVIQKK7zM1g6EhAeTaA5EUJSUASXytxLZ5IQB9o6xDEkkhASpanmJ3PSEDOBpxpvfJIQOLM5Z5rHElAj3BdTSIKSEB2Es69rlVIQLNDySc2a0hA"},"shape":[54],"dtype":"float64","order":"little"}]]}}}],["year_slider",{"id":"p2318"}],["x_select",{"type":"object","name":"Select","id":"p2319","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p2395","attributes":{"args":{"type":"map","entries":[["render_source",{"id":"p2322"}],["source",{"id":"p2325"}],["year_slider",{"id":"p2318"}],["x_select",{"id":"p2319"}],["y_select",{"type":"object","name":"Select","id":"p2320","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p2396","attributes":{"args":{"type":"map","entries":[["render_source",{"id":"p2322"}],["source",{"id":"p2325"}],["year_slider",{"id":"p2318"}],["x_select",{"id":"p2319"}],["y_select",{"id":"p2320"}],["size_select",{"type":"object","name":"Select","id":"p2321","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p2397","attributes":{"args":{"type":"map","entries":[["render_source",{"id":"p2322"}],["source",{"id":"p2325"}],["year_slider",{"id":"p2318"}],["x_select",{"id":"p2319"}],["y_select",{"id":"p2320"}],["size_select",{"id":"p2321"}],["xaxis",[{"id":"p2341"}]],["yaxis",[{"id":"p2346"}]],["label_options_xy",{"type":"map","entries":[["HouseholdAverageSize","Household size (persons)"],["HouseholdAverageAge","Age of persons in household (years)"],["IncomeAfterTax","Income after tax (Currency)"],["Wealth","Wealth (Currency)"],["Debt","Debt (Currency)"],["HouseholdWithChildren_Percent","Household with children (%)"],["Immigrant_Percent","Household with immigrant background (%)"],["UniversityEducation_Percent","University education (%)"],["Urban_Percent","Live in urban (%)"],["HousingOwnership_Percent","Housing ownership (%)"],["Different_ResidenceWork_Percent","Different residence &amp; work municipality (%)"]]}],["label_options_bysize",{"type":"map","entries":[["SegmentPopulationByHousehold","Segment population by household"],["SegmentPopulationByPerson","Segment population by person"]]}],["label_options_unit",{"type":"map","entries":[["SegmentPopulationByHousehold","Households"],["SegmentPopulationByPerson","Persons"]]}],["x_max",2.91],["x_min",1.68],["y_max",1023808.36],["y_min",259853.7819],["background_year",{"type":"object","name":"Div","id":"p2365","attributes":{"styles":{"type":"map","entries":[["position","absolute"],["bottom","160px"],["left","150px"],["color","lightgray"],["font-size","240px"],["font-weight","bold"],["background-color","transparent"],["z-index","0"]]},"text":"2005"}}],["background_label",{"id":"p2366"}],["size_display_text","Segment population by household"],["x_range",{"id":"p2362"}],["y_range",{"id":"p2363"}],["hover",{"id":"p2364"}],["legend",{"id":"p2376"}]]},"code":"\n\n// Update rendered data from a full data set based on selected year\n\nvar selected_year = year_slider.value;\nvar selected_indices = [];\nvar selected_segment_name = [];\nvar selected_segment_pop_size = [];\n//var selected_y_max_visible = [];\n//var selected_size_type_label = label_options_bysize[size_select.value];\n\n\nfor (var i = 0; i &lt; source.data['YearColumn'].length; i++) {\n    if (source.data['YearColumn'][i] === selected_year) {\n        selected_indices.push(i);\n        selected_segment_name.push(source.data['Segment'][i]);\n        selected_segment_pop_size.push((source.data[size_select.value][i] / 10000) + 2);\n        //selected_year_number.push(source.data[year_slider.value][i]);\n        //selected_size_type_label.push(render_source['size_type_label'][i]);\n    }\n}\nrender_source.data['x'] = selected_indices.map(function(index) { return source.data[x_select.value][index]; });\nrender_source.data['y'] = selected_indices.map(function(index) { return source.data[y_select.value][index]; });\nrender_source.data['segment_pop'] = selected_indices.map(function(index) { return source.data[size_select.value][index]; });\nrender_source.data['segment_name'] = selected_segment_name;  //This is used to return the segment name for the legend/circles and their colors.\nrender_source.data['segment_pop_size'] = selected_segment_pop_size;\n//render_source.data['year_number'] = selected_year_number;\n//render_source.data['size_type_label'] = selected_size_type_label;\n\n\n// Calculate x and y ranges based on selected x and y values\nvar x_values = source.data[x_select.value];\nvar y_values = source.data[y_select.value];\n//var x_values = render_source.data['x'];\n//var y_values = render_source.data['y'];\n\n//var x_min = x_values[0];\n//var y_min = y_values[0];\nvar x_max = x_values[0];\nvar y_max = y_values[0];\nvar x_min = Number.POSITIVE_INFINITY;\nvar y_min = Number.POSITIVE_INFINITY;\n//var x_max = Number.NEGATIVE_INFINITY;\n//var y_max = Number.NEGATIVE_INFINITY;\n\n// Note: x_values[0] or y_values[0] set the initial value equal to the first value in the array of numbers.\n// To deal with the condition that the min value becomes negative, (as we set for some missing value), we set the initial min to a positive infinity.\n// So, the plot range range of x or y does not show negative values.\n// See https://stackoverflow.com/questions/52466644/explain-min-max-array-with-infinity\n// \"The initial value of Infinity is Number.POSITIVE_INFINITY.\n// ...The value Infinity (positive infinity) is greater than any other number.\n// ...Mathematically, this value behaves the same as infinity;\n//...for example, any positive number multiplied by Infinity equals Infinity, and any number divided by Infinity equals 0.\"\n\nvar range_for_y = 0;\nvar selected_y_max_column = 0;\n\n// Loop to find min and max values of x and y\n// See https://stackoverflow.com/questions/1669190/find-the-min-max-element-of-an-array-in-javascript\n// To do later: One more step for finding min values:\n//An extra for-loop should be set to make sure unavailable values that are assigned negative values are not entered into the min calculation.\n\nfor (var i = 0; i &lt; x_values.length; i++) {\n    if (x_values[i] &gt;= 0) { // Consider only non-negative values\n        if (x_values[i] &lt; x_min) {\n            x_min = x_values[i];\n        }\n        if (x_values[i] &gt; x_max) {\n            x_max = x_values[i];\n        }\n    }\n\n    if (y_values[i] &gt;= 0) { // Consider only non-negative values\n        if (y_values[i] &lt; y_min) {\n            y_min = y_values[i];\n        }\n        if (y_values[i] &gt; y_max) {\n            y_max = y_values[i];\n        }\n    }\n}\n\n// Update x and y ranges of the plot\nx_range.start = 0.7 * x_min - 0.6;\nx_range.end = 1.1 * x_max + 0.5;\ny_range.start = 0.7 * y_min - 0.6;\ny_range.end = 1.1 * y_max + 0.5;\n//y_range.end = 2000000;\nrange_for_y = y_max - y_min;\n\n\n// Update axis labels to reflect what was selected\nxaxis[0].axis_label = label_options_xy[x_select.value];\nyaxis[0].axis_label = label_options_xy[y_select.value];\n\n// Get the selected unit based on size_select value\n\n// Update tooltips dynamically based on selected x and y columns\nhover.tooltips = [\n    [\"Segment\", \"@segment_name\"],\n    [\"Segment Population\", \"@segment_pop{0,0}\" + \" \" + label_options_unit[size_select.value]],\n    [label_options_xy[x_select.value], \"@x{0,0.0}\"],\n    [label_options_xy[y_select.value], \"@y{0,0.0}\"]\n];\n\n\nbackground_year.text = \"\" + year_slider.value;  // The \"\" converts this content to text which is needed to update the background text. Keep it!\nbackground_label.text = \"\" + year_slider.value;  // The \"\" converts this content to text which is needed to update the background text. Keep it!\n\n// To update the legend\nvar legend_label = \"Unit: \" + label_options_unit[size_select.value];\nlegend.items[0].label = legend_label;  // Update the legend label\n\n\nvar size_display_text = label_options_bysize[size_select.value];\n\n\nrender_source.change.emit();\n\n//console.log(\"Selected Year:\", selected_year);\n//console.log(\"Indices:\", selected_indices);\n//console.log(\"Segment Name:\", selected_segment_name);\n//console.log(\"Segment Pop Size:\", selected_segment_pop_size);\n\n"}}]]]},"width":340,"title":"Segment represented by unit of households or persons?","options":[["SegmentPopulationByHousehold","Segment population by household"],["SegmentPopulationByPerson","Segment population by person"]],"value":"SegmentPopulationByHousehold"}}],["xaxis",[{"id":"p2341"}]],["yaxis",[{"id":"p2346"}]],["label_options_xy",{"type":"map","entries":[["HouseholdAverageSize","Household size (persons)"],["HouseholdAverageAge","Age of persons in household (years)"],["IncomeAfterTax","Income after tax (Currency)"],["Wealth","Wealth (Currency)"],["Debt","Debt (Currency)"],["HouseholdWithChildren_Percent","Household with children (%)"],["Immigrant_Percent","Household with immigrant background (%)"],["UniversityEducation_Percent","University education (%)"],["Urban_Percent","Live in urban (%)"],["HousingOwnership_Percent","Housing ownership (%)"],["Different_ResidenceWork_Percent","Different residence &amp; work municipality (%)"]]}],["label_options_bysize",{"type":"map","entries":[["SegmentPopulationByHousehold","Segment population by household"],["SegmentPopulationByPerson","Segment population by person"]]}],["label_options_unit",{"type":"map","entries":[["SegmentPopulationByHousehold","Households"],["SegmentPopulationByPerson","Persons"]]}],["x_max",2.91],["x_min",1.68],["y_max",1023808.36],["y_min",259853.7819],["background_year",{"id":"p2365"}],["background_label",{"id":"p2366"}],["size_display_text","Segment population by household"],["x_range",{"id":"p2362"}],["y_range",{"id":"p2363"}],["hover",{"id":"p2364"}],["legend",{"id":"p2376"}]]},"code":"\n\n// Update rendered data from a full data set based on selected year\n\nvar selected_year = year_slider.value;\nvar selected_indices = [];\nvar selected_segment_name = [];\nvar selected_segment_pop_size = [];\n//var selected_y_max_visible = [];\n//var selected_size_type_label = label_options_bysize[size_select.value];\n\n\nfor (var i = 0; i &lt; source.data['YearColumn'].length; i++) {\n    if (source.data['YearColumn'][i] === selected_year) {\n        selected_indices.push(i);\n        selected_segment_name.push(source.data['Segment'][i]);\n        selected_segment_pop_size.push((source.data[size_select.value][i] / 10000) + 2);\n        //selected_year_number.push(source.data[year_slider.value][i]);\n        //selected_size_type_label.push(render_source['size_type_label'][i]);\n    }\n}\nrender_source.data['x'] = selected_indices.map(function(index) { return source.data[x_select.value][index]; });\nrender_source.data['y'] = selected_indices.map(function(index) { return source.data[y_select.value][index]; });\nrender_source.data['segment_pop'] = selected_indices.map(function(index) { return source.data[size_select.value][index]; });\nrender_source.data['segment_name'] = selected_segment_name;  //This is used to return the segment name for the legend/circles and their colors.\nrender_source.data['segment_pop_size'] = selected_segment_pop_size;\n//render_source.data['year_number'] = selected_year_number;\n//render_source.data['size_type_label'] = selected_size_type_label;\n\n\n// Calculate x and y ranges based on selected x and y values\nvar x_values = source.data[x_select.value];\nvar y_values = source.data[y_select.value];\n//var x_values = render_source.data['x'];\n//var y_values = render_source.data['y'];\n\n//var x_min = x_values[0];\n//var y_min = y_values[0];\nvar x_max = x_values[0];\nvar y_max = y_values[0];\nvar x_min = Number.POSITIVE_INFINITY;\nvar y_min = Number.POSITIVE_INFINITY;\n//var x_max = Number.NEGATIVE_INFINITY;\n//var y_max = Number.NEGATIVE_INFINITY;\n\n// Note: x_values[0] or y_values[0] set the initial value equal to the first value in the array of numbers.\n// To deal with the condition that the min value becomes negative, (as we set for some missing value), we set the initial min to a positive infinity.\n// So, the plot range range of x or y does not show negative values.\n// See https://stackoverflow.com/questions/52466644/explain-min-max-array-with-infinity\n// \"The initial value of Infinity is Number.POSITIVE_INFINITY.\n// ...The value Infinity (positive infinity) is greater than any other number.\n// ...Mathematically, this value behaves the same as infinity;\n//...for example, any positive number multiplied by Infinity equals Infinity, and any number divided by Infinity equals 0.\"\n\nvar range_for_y = 0;\nvar selected_y_max_column = 0;\n\n// Loop to find min and max values of x and y\n// See https://stackoverflow.com/questions/1669190/find-the-min-max-element-of-an-array-in-javascript\n// To do later: One more step for finding min values:\n//An extra for-loop should be set to make sure unavailable values that are assigned negative values are not entered into the min calculation.\n\nfor (var i = 0; i &lt; x_values.length; i++) {\n    if (x_values[i] &gt;= 0) { // Consider only non-negative values\n        if (x_values[i] &lt; x_min) {\n            x_min = x_values[i];\n        }\n        if (x_values[i] &gt; x_max) {\n            x_max = x_values[i];\n        }\n    }\n\n    if (y_values[i] &gt;= 0) { // Consider only non-negative values\n        if (y_values[i] &lt; y_min) {\n            y_min = y_values[i];\n        }\n        if (y_values[i] &gt; y_max) {\n            y_max = y_values[i];\n        }\n    }\n}\n\n// Update x and y ranges of the plot\nx_range.start = 0.7 * x_min - 0.6;\nx_range.end = 1.1 * x_max + 0.5;\ny_range.start = 0.7 * y_min - 0.6;\ny_range.end = 1.1 * y_max + 0.5;\n//y_range.end = 2000000;\nrange_for_y = y_max - y_min;\n\n\n// Update axis labels to reflect what was selected\nxaxis[0].axis_label = label_options_xy[x_select.value];\nyaxis[0].axis_label = label_options_xy[y_select.value];\n\n// Get the selected unit based on size_select value\n\n// Update tooltips dynamically based on selected x and y columns\nhover.tooltips = [\n    [\"Segment\", \"@segment_name\"],\n    [\"Segment Population\", \"@segment_pop{0,0}\" + \" \" + label_options_unit[size_select.value]],\n    [label_options_xy[x_select.value], \"@x{0,0.0}\"],\n    [label_options_xy[y_select.value], \"@y{0,0.0}\"]\n];\n\n\nbackground_year.text = \"\" + year_slider.value;  // The \"\" converts this content to text which is needed to update the background text. Keep it!\nbackground_label.text = \"\" + year_slider.value;  // The \"\" converts this content to text which is needed to update the background text. Keep it!\n\n// To update the legend\nvar legend_label = \"Unit: \" + label_options_unit[size_select.value];\nlegend.items[0].label = legend_label;  // Update the legend label\n\n\nvar size_display_text = label_options_bysize[size_select.value];\n\n\nrender_source.change.emit();\n\n//console.log(\"Selected Year:\", selected_year);\n//console.log(\"Indices:\", selected_indices);\n//console.log(\"Segment Name:\", selected_segment_name);\n//console.log(\"Segment Pop Size:\", selected_segment_pop_size);\n\n"}}]]]},"width":340,"title":"Select data for Y (vertical axis)","options":[["HouseholdAverageSize","Household size (persons)"],["HouseholdAverageAge","Age of persons in household (years)"],["IncomeAfterTax","Income after tax (Currency)"],["Wealth","Wealth (Currency)"],["Debt","Debt (Currency)"],["HouseholdWithChildren_Percent","Household with children (%)"],["Immigrant_Percent","Household with immigrant background (%)"],["UniversityEducation_Percent","University education (%)"],["Urban_Percent","Live in urban (%)"],["HousingOwnership_Percent","Housing ownership (%)"],["Different_ResidenceWork_Percent","Different residence &amp; work municipality (%)"]],"value":"IncomeAfterTax"}}],["size_select",{"id":"p2321"}],["xaxis",[{"id":"p2341"}]],["yaxis",[{"id":"p2346"}]],["label_options_xy",{"type":"map","entries":[["HouseholdAverageSize","Household size (persons)"],["HouseholdAverageAge","Age of persons in household (years)"],["IncomeAfterTax","Income after tax (Currency)"],["Wealth","Wealth (Currency)"],["Debt","Debt (Currency)"],["HouseholdWithChildren_Percent","Household with children (%)"],["Immigrant_Percent","Household with immigrant background (%)"],["UniversityEducation_Percent","University education (%)"],["Urban_Percent","Live in urban (%)"],["HousingOwnership_Percent","Housing ownership (%)"],["Different_ResidenceWork_Percent","Different residence &amp; work municipality (%)"]]}],["label_options_bysize",{"type":"map","entries":[["SegmentPopulationByHousehold","Segment population by household"],["SegmentPopulationByPerson","Segment population by person"]]}],["label_options_unit",{"type":"map","entries":[["SegmentPopulationByHousehold","Households"],["SegmentPopulationByPerson","Persons"]]}],["x_max",2.91],["x_min",1.68],["y_max",1023808.36],["y_min",259853.7819],["background_year",{"id":"p2365"}],["background_label",{"id":"p2366"}],["size_display_text","Segment population by household"],["x_range",{"id":"p2362"}],["y_range",{"id":"p2363"}],["hover",{"id":"p2364"}],["legend",{"id":"p2376"}]]},"code":"\n\n// Update rendered data from a full data set based on selected year\n\nvar selected_year = year_slider.value;\nvar selected_indices = [];\nvar selected_segment_name = [];\nvar selected_segment_pop_size = [];\n//var selected_y_max_visible = [];\n//var selected_size_type_label = label_options_bysize[size_select.value];\n\n\nfor (var i = 0; i &lt; source.data['YearColumn'].length; i++) {\n    if (source.data['YearColumn'][i] === selected_year) {\n        selected_indices.push(i);\n        selected_segment_name.push(source.data['Segment'][i]);\n        selected_segment_pop_size.push((source.data[size_select.value][i] / 10000) + 2);\n        //selected_year_number.push(source.data[year_slider.value][i]);\n        //selected_size_type_label.push(render_source['size_type_label'][i]);\n    }\n}\nrender_source.data['x'] = selected_indices.map(function(index) { return source.data[x_select.value][index]; });\nrender_source.data['y'] = selected_indices.map(function(index) { return source.data[y_select.value][index]; });\nrender_source.data['segment_pop'] = selected_indices.map(function(index) { return source.data[size_select.value][index]; });\nrender_source.data['segment_name'] = selected_segment_name;  //This is used to return the segment name for the legend/circles and their colors.\nrender_source.data['segment_pop_size'] = selected_segment_pop_size;\n//render_source.data['year_number'] = selected_year_number;\n//render_source.data['size_type_label'] = selected_size_type_label;\n\n\n// Calculate x and y ranges based on selected x and y values\nvar x_values = source.data[x_select.value];\nvar y_values = source.data[y_select.value];\n//var x_values = render_source.data['x'];\n//var y_values = render_source.data['y'];\n\n//var x_min = x_values[0];\n//var y_min = y_values[0];\nvar x_max = x_values[0];\nvar y_max = y_values[0];\nvar x_min = Number.POSITIVE_INFINITY;\nvar y_min = Number.POSITIVE_INFINITY;\n//var x_max = Number.NEGATIVE_INFINITY;\n//var y_max = Number.NEGATIVE_INFINITY;\n\n// Note: x_values[0] or y_values[0] set the initial value equal to the first value in the array of numbers.\n// To deal with the condition that the min value becomes negative, (as we set for some missing value), we set the initial min to a positive infinity.\n// So, the plot range range of x or y does not show negative values.\n// See https://stackoverflow.com/questions/52466644/explain-min-max-array-with-infinity\n// \"The initial value of Infinity is Number.POSITIVE_INFINITY.\n// ...The value Infinity (positive infinity) is greater than any other number.\n// ...Mathematically, this value behaves the same as infinity;\n//...for example, any positive number multiplied by Infinity equals Infinity, and any number divided by Infinity equals 0.\"\n\nvar range_for_y = 0;\nvar selected_y_max_column = 0;\n\n// Loop to find min and max values of x and y\n// See https://stackoverflow.com/questions/1669190/find-the-min-max-element-of-an-array-in-javascript\n// To do later: One more step for finding min values:\n//An extra for-loop should be set to make sure unavailable values that are assigned negative values are not entered into the min calculation.\n\nfor (var i = 0; i &lt; x_values.length; i++) {\n    if (x_values[i] &gt;= 0) { // Consider only non-negative values\n        if (x_values[i] &lt; x_min) {\n            x_min = x_values[i];\n        }\n        if (x_values[i] &gt; x_max) {\n            x_max = x_values[i];\n        }\n    }\n\n    if (y_values[i] &gt;= 0) { // Consider only non-negative values\n        if (y_values[i] &lt; y_min) {\n            y_min = y_values[i];\n        }\n        if (y_values[i] &gt; y_max) {\n            y_max = y_values[i];\n        }\n    }\n}\n\n// Update x and y ranges of the plot\nx_range.start = 0.7 * x_min - 0.6;\nx_range.end = 1.1 * x_max + 0.5;\ny_range.start = 0.7 * y_min - 0.6;\ny_range.end = 1.1 * y_max + 0.5;\n//y_range.end = 2000000;\nrange_for_y = y_max - y_min;\n\n\n// Update axis labels to reflect what was selected\nxaxis[0].axis_label = label_options_xy[x_select.value];\nyaxis[0].axis_label = label_options_xy[y_select.value];\n\n// Get the selected unit based on size_select value\n\n// Update tooltips dynamically based on selected x and y columns\nhover.tooltips = [\n    [\"Segment\", \"@segment_name\"],\n    [\"Segment Population\", \"@segment_pop{0,0}\" + \" \" + label_options_unit[size_select.value]],\n    [label_options_xy[x_select.value], \"@x{0,0.0}\"],\n    [label_options_xy[y_select.value], \"@y{0,0.0}\"]\n];\n\n\nbackground_year.text = \"\" + year_slider.value;  // The \"\" converts this content to text which is needed to update the background text. Keep it!\nbackground_label.text = \"\" + year_slider.value;  // The \"\" converts this content to text which is needed to update the background text. Keep it!\n\n// To update the legend\nvar legend_label = \"Unit: \" + label_options_unit[size_select.value];\nlegend.items[0].label = legend_label;  // Update the legend label\n\n\nvar size_display_text = label_options_bysize[size_select.value];\n\n\nrender_source.change.emit();\n\n//console.log(\"Selected Year:\", selected_year);\n//console.log(\"Indices:\", selected_indices);\n//console.log(\"Segment Name:\", selected_segment_name);\n//console.log(\"Segment Pop Size:\", selected_segment_pop_size);\n\n"}}]]]},"width":340,"title":"Select data for X (horizontal axis)","options":[["HouseholdAverageSize","Household size (persons)"],["HouseholdAverageAge","Age of persons in household (years)"],["IncomeAfterTax","Income after tax (Currency)"],["Wealth","Wealth (Currency)"],["Debt","Debt (Currency)"],["HouseholdWithChildren_Percent","Household with children (%)"],["Immigrant_Percent","Household with immigrant background (%)"],["UniversityEducation_Percent","University education (%)"],["Urban_Percent","Live in urban (%)"],["HousingOwnership_Percent","Housing ownership (%)"],["Different_ResidenceWork_Percent","Different residence &amp; work municipality (%)"]],"value":"HouseholdAverageSize"}}],["y_select",{"id":"p2320"}],["size_select",{"id":"p2321"}],["xaxis",[{"id":"p2341"}]],["yaxis",[{"id":"p2346"}]],["label_options_xy",{"type":"map","entries":[["HouseholdAverageSize","Household size (persons)"],["HouseholdAverageAge","Age of persons in household (years)"],["IncomeAfterTax","Income after tax (Currency)"],["Wealth","Wealth (Currency)"],["Debt","Debt (Currency)"],["HouseholdWithChildren_Percent","Household with children (%)"],["Immigrant_Percent","Household with immigrant background (%)"],["UniversityEducation_Percent","University education (%)"],["Urban_Percent","Live in urban (%)"],["HousingOwnership_Percent","Housing ownership (%)"],["Different_ResidenceWork_Percent","Different residence &amp; work municipality (%)"]]}],["label_options_bysize",{"type":"map","entries":[["SegmentPopulationByHousehold","Segment population by household"],["SegmentPopulationByPerson","Segment population by person"]]}],["label_options_unit",{"type":"map","entries":[["SegmentPopulationByHousehold","Households"],["SegmentPopulationByPerson","Persons"]]}],["x_max",2.91],["x_min",1.68],["y_max",1023808.36],["y_min",259853.7819],["background_year",{"id":"p2365"}],["background_label",{"id":"p2366"}],["size_display_text","Segment population by household"],["x_range",{"id":"p2362"}],["y_range",{"id":"p2363"}],["hover",{"id":"p2364"}],["legend",{"id":"p2376"}]]},"code":"\n\n// Update rendered data from a full data set based on selected year\n\nvar selected_year = year_slider.value;\nvar selected_indices = [];\nvar selected_segment_name = [];\nvar selected_segment_pop_size = [];\n//var selected_y_max_visible = [];\n//var selected_size_type_label = label_options_bysize[size_select.value];\n\n\nfor (var i = 0; i &lt; source.data['YearColumn'].length; i++) {\n    if (source.data['YearColumn'][i] === selected_year) {\n        selected_indices.push(i);\n        selected_segment_name.push(source.data['Segment'][i]);\n        selected_segment_pop_size.push((source.data[size_select.value][i] / 10000) + 2);\n        //selected_year_number.push(source.data[year_slider.value][i]);\n        //selected_size_type_label.push(render_source['size_type_label'][i]);\n    }\n}\nrender_source.data['x'] = selected_indices.map(function(index) { return source.data[x_select.value][index]; });\nrender_source.data['y'] = selected_indices.map(function(index) { return source.data[y_select.value][index]; });\nrender_source.data['segment_pop'] = selected_indices.map(function(index) { return source.data[size_select.value][index]; });\nrender_source.data['segment_name'] = selected_segment_name;  //This is used to return the segment name for the legend/circles and their colors.\nrender_source.data['segment_pop_size'] = selected_segment_pop_size;\n//render_source.data['year_number'] = selected_year_number;\n//render_source.data['size_type_label'] = selected_size_type_label;\n\n\n// Calculate x and y ranges based on selected x and y values\nvar x_values = source.data[x_select.value];\nvar y_values = source.data[y_select.value];\n//var x_values = render_source.data['x'];\n//var y_values = render_source.data['y'];\n\n//var x_min = x_values[0];\n//var y_min = y_values[0];\nvar x_max = x_values[0];\nvar y_max = y_values[0];\nvar x_min = Number.POSITIVE_INFINITY;\nvar y_min = Number.POSITIVE_INFINITY;\n//var x_max = Number.NEGATIVE_INFINITY;\n//var y_max = Number.NEGATIVE_INFINITY;\n\n// Note: x_values[0] or y_values[0] set the initial value equal to the first value in the array of numbers.\n// To deal with the condition that the min value becomes negative, (as we set for some missing value), we set the initial min to a positive infinity.\n// So, the plot range range of x or y does not show negative values.\n// See https://stackoverflow.com/questions/52466644/explain-min-max-array-with-infinity\n// \"The initial value of Infinity is Number.POSITIVE_INFINITY.\n// ...The value Infinity (positive infinity) is greater than any other number.\n// ...Mathematically, this value behaves the same as infinity;\n//...for example, any positive number multiplied by Infinity equals Infinity, and any number divided by Infinity equals 0.\"\n\nvar range_for_y = 0;\nvar selected_y_max_column = 0;\n\n// Loop to find min and max values of x and y\n// See https://stackoverflow.com/questions/1669190/find-the-min-max-element-of-an-array-in-javascript\n// To do later: One more step for finding min values:\n//An extra for-loop should be set to make sure unavailable values that are assigned negative values are not entered into the min calculation.\n\nfor (var i = 0; i &lt; x_values.length; i++) {\n    if (x_values[i] &gt;= 0) { // Consider only non-negative values\n        if (x_values[i] &lt; x_min) {\n            x_min = x_values[i];\n        }\n        if (x_values[i] &gt; x_max) {\n            x_max = x_values[i];\n        }\n    }\n\n    if (y_values[i] &gt;= 0) { // Consider only non-negative values\n        if (y_values[i] &lt; y_min) {\n            y_min = y_values[i];\n        }\n        if (y_values[i] &gt; y_max) {\n            y_max = y_values[i];\n        }\n    }\n}\n\n// Update x and y ranges of the plot\nx_range.start = 0.7 * x_min - 0.6;\nx_range.end = 1.1 * x_max + 0.5;\ny_range.start = 0.7 * y_min - 0.6;\ny_range.end = 1.1 * y_max + 0.5;\n//y_range.end = 2000000;\nrange_for_y = y_max - y_min;\n\n\n// Update axis labels to reflect what was selected\nxaxis[0].axis_label = label_options_xy[x_select.value];\nyaxis[0].axis_label = label_options_xy[y_select.value];\n\n// Get the selected unit based on size_select value\n\n// Update tooltips dynamically based on selected x and y columns\nhover.tooltips = [\n    [\"Segment\", \"@segment_name\"],\n    [\"Segment Population\", \"@segment_pop{0,0}\" + \" \" + label_options_unit[size_select.value]],\n    [label_options_xy[x_select.value], \"@x{0,0.0}\"],\n    [label_options_xy[y_select.value], \"@y{0,0.0}\"]\n];\n\n\nbackground_year.text = \"\" + year_slider.value;  // The \"\" converts this content to text which is needed to update the background text. Keep it!\nbackground_label.text = \"\" + year_slider.value;  // The \"\" converts this content to text which is needed to update the background text. Keep it!\n\n// To update the legend\nvar legend_label = \"Unit: \" + label_options_unit[size_select.value];\nlegend.items[0].label = legend_label;  // Update the legend label\n\n\nvar size_display_text = label_options_bysize[size_select.value];\n\n\nrender_source.change.emit();\n\n//console.log(\"Selected Year:\", selected_year);\n//console.log(\"Indices:\", selected_indices);\n//console.log(\"Segment Name:\", selected_segment_name);\n//console.log(\"Segment Pop Size:\", selected_segment_pop_size);\n\n"}}]]]},"width":340,"title":"Year","start":2005,"end":2022,"value":2005}},{"type":"object","name":"Row","id":"p2405","attributes":{"children":[{"type":"object","name":"Button","id":"p2401","attributes":{"js_event_callbacks":{"type":"map","entries":[["button_click",[{"type":"object","name":"CustomJS","id":"p2402","attributes":{"args":{"type":"map","entries":[["play_button",{"id":"p2401"}],["year_slider",{"id":"p2318"}]]},"code":"\n    if (play_button.label == '\u25ba Play') {\n        play_button.label = '|| Pause';\n        var interval_id = setInterval(function() {\n            var year = year_slider.value + 1;\n            if (year &gt; year_slider.end) {\n                year = year_slider.start;\n            }\n            year_slider.value = year;\n        }, 400);  // Change speed here\n        play_button.interval_id = interval_id;  // Store interval ID in the play_button\n    } else {\n        play_button.label = '\u25ba Play';\n        clearInterval(play_button.interval_id);  // Clear interval using stored ID\n    }\n"}}]]]},"width":70,"label":"\u25ba Play"}},{"type":"object","name":"Div","id":"p2403","attributes":{"text":"&lt;p style='text-align: left; font-style: italic; color: black; padding-top: 8px; font-size: 10px;'&gt;Click on Play/Pause or use the slider for animation.&lt;/p&gt;"}}]}},{"id":"p2319"},{"type":"object","name":"Row","id":"p2406","attributes":{"children":[{"type":"object","name":"Button","id":"p2399","attributes":{"js_event_callbacks":{"type":"map","entries":[["button_click",[{"type":"object","name":"CustomJS","id":"p2400","attributes":{"args":{"type":"map","entries":[["x_select",{"id":"p2319"}],["y_select",{"id":"p2320"}],["label_options_xy",{"type":"map","entries":[["HouseholdAverageSize","Household size (persons)"],["HouseholdAverageAge","Age of persons in household (years)"],["IncomeAfterTax","Income after tax (Currency)"],["Wealth","Wealth (Currency)"],["Debt","Debt (Currency)"],["HouseholdWithChildren_Percent","Household with children (%)"],["Immigrant_Percent","Household with immigrant background (%)"],["UniversityEducation_Percent","University education (%)"],["Urban_Percent","Live in urban (%)"],["HousingOwnership_Percent","Housing ownership (%)"],["Different_ResidenceWork_Percent","Different residence &amp; work municipality (%)"]]}],["xaxis",[{"id":"p2341"}]],["yaxis",[{"id":"p2346"}]],["render_source",{"id":"p2322"}]]},"code":"\n    var temp_x = x_select.value;\n    var temp_x_label = label_options_xy[x_select.value];\n    var temp_y = y_select.value;\n    var temp_y_label = label_options_xy[y_select.value];\n\n    x_select.value = temp_y;\n    label_options_xy[x_select.value] = temp_y_label;\n    y_select.value = temp_x;\n    label_options_xy[y_select.value] = temp_x_label;\n\n    xaxis[0].axis_label = label_options_xy[x_select.value];\n    yaxis[0].axis_label = label_options_xy[y_select.value];\n\n    render_source.change.emit();\n"}}]]]},"width":70,"label":"X \u21c4 Y"}},{"type":"object","name":"Div","id":"p2404","attributes":{"text":"&lt;p style='text-align: left; font-style: italic; color: black; padding-top: 8px; font-size: 10px;'&gt;Click to swap data for X and Y axes.&lt;/p&gt;"}}]}},{"id":"p2320"},{"id":"p2321"},{"type":"object","name":"Div","id":"p2390","attributes":{"styles":{"type":"map","entries":[["border","1px solid #cccccc"],["border-radius","5px"],["width","342px"],["padding","10px"],["font-family","Arial, sans-serif"],["font-size","12px"],["color","black"]]},"text":"\n    &lt;p&gt;&lt;strong&gt;Note 1:&lt;/strong&gt; Values on the axes are &lt;i&gt;averages&lt;/i&gt; for the depicted population segments.&lt;/p&gt;\n    &lt;p&gt;&lt;strong&gt;Note 2:&lt;/strong&gt; Due to lack of data, the graph is &lt;i&gt;blank&lt;/i&gt; for the following variables in the mentioned years.&lt;/p&gt;\n    &lt;p&gt;- Income after tax: 2022&lt;/p&gt;\n    &lt;p&gt;- Wealth: 2021 &amp; 2022&lt;/p&gt;\n    &lt;p&gt;- Debt: 2022&lt;/p&gt;\n    &lt;p&gt;- University education: 2022&lt;/p&gt;\n    &lt;p&gt;- Live in urban: 2021 &amp; 2022&lt;/p&gt;\n    &lt;p&gt;- Housing ownership: 2005 to 2014&lt;/p&gt;\n"}}]}}]}},{"type":"object","name":"Div","id":"p2392","attributes":{"styles":{"type":"map","entries":[["border","1px solid #808080"],["border-radius","5px"],["width","768px"],["padding","10px"],["font-family","Arial, sans-serif"],["font-size","12px"],["color","black"]]},"text":"\n    &lt;p&gt;&lt;strong&gt;Comparing various socioeconomics of households in Country W.&lt;/strong&gt;&lt;/p&gt;\n    &lt;p&gt;Interactive supplementary for paper, &lt;i&gt;under review.&lt;/i&gt;\n    &lt;/p&gt;\n"}},{"type":"object","name":"Div","id":"p2393","attributes":{"styles":{"type":"map","entries":[["border","1px solid #808080"],["border-radius","5px"],["width","768px"],["padding","10px"],["font-family","Arial, sans-serif"],["font-size","12px"],["color","black"]]},"text":"\n    &lt;p&gt;&lt;strong&gt;Further note on data:&lt;/strong&gt;&lt;/p&gt;\n    &lt;p&gt;For the sake of presentation in this interactive figure, the following transformation/assumption are made:&lt;/p&gt;\n    &lt;p&gt;- Urban settlement (2010): The data is unavailable in the database.\n    An interpolation (i.e., averaging) of data for 2009 and 2011 is performed.&lt;/p&gt;\n    &lt;p&gt;- University Education (2021): Data is available to and including August 2021.\n    The education data is assumed for the whole year.&lt;/p&gt;\n"}},{"type":"object","name":"Div","id":"p2394","attributes":{"styles":{"type":"map","entries":[["border","1px solid #808080"],["border-radius","5px"],["width","768px"],["padding","10px"],["font-family","Arial, sans-serif"],["font-size","12px"],["color","black"]]},"text":"\n    &lt;p&gt;&lt;strong&gt;Developed by&lt;/strong&gt; [DBPR], based on Gapminder of Bokeh package in Python.\n    Server-side standalone deployment using JavaScript by [DBPR] and [DBPR]. Data provided by [DBPR].&lt;/p&gt;\n    &lt;p&gt;&lt;strong&gt;Declaration of funding:&lt;/strong&gt; This research is partly funded by [DBPR].&lt;/p&gt;\n"}}]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('p2454').textContent;
              const render_items = [{"docid":"d27618dc-3624-4879-99fc-0a306a37591e","roots":{"p2409":"b554879d-0f8c-4f99-a7fe-7fb23dbd2d61"},"root_ids":["p2409"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>